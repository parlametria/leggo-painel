<link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300&display=swap" rel="stylesheet">
<app-loading *ngIf="isLoading | async"></app-loading>

<div class="container-cabecalho">
  <div class="container">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
        <li class="breadcrumb-item">
          <a
            [routerLink]="['../']"
            class="">
            Parlamentares
          </a>
        </li>
        <li class="breadcrumb-item">
          <span> {{ parlamentarInfo?.nome_autor }} </span>
        </li>
      </ol>
    </nav>
    <div 
      class="container-info" 
      id="container-info"
      [hidden]="isLoading | async">
      <span *ngIf="parlamentarInfo?.casa_autor == 'camara'" class="parlamentar-name">
        <h4 class="header header4">Dep. {{ parlamentarInfo?.nome_autor }}</h4>
        <h5 class="header header5"><img src="assets/imgs/parlamentar/dep.svg"> Deputado (a) / Partido - {{parlamentarInfo?.partido}}</h5>  
      </span>
      <span *ngIf="parlamentarInfo?.casa_autor == 'senado'" class="parlamentar-name">
        <img src="assets/imgs/parlamentar/sen.svg">
        Sen. {{ parlamentarInfo?.nome_autor }}
        <p>Senador (a) / Partido - {{parlamentarInfo?.partido}}</p>
      </span>
  
      <div class="container-perfil"
        *ngIf="toggleDrawer">
        
        <div class="foto-parlamentar flex2">
          <img [src]="parlamentarInfo?.url_foto">
        </div>
    
        <div class="flex2">
          <div class="container-map-graph">
            <div class="center-map">      
              <img src="assets/imgs/estados/{{parlamentarInfo?.uf}}.svg">
            </div>
            <div class="center-item ">
              <span class="paragraph">Estado</span>
              <h5>
                {{ parlamentarInfo?.uf }}
              </h5>
            </div>
          </div>
        </div>
        
        <div class="flex2">
          <div class="container-map-graph">
            <app-vis-cabecalho
              [parlamentar] = "parlamentar"
              *ngIf="parlamentar?.disciplina && parlamentar?.governismo || true"
            >
            </app-vis-cabecalho>
            <div
              [ngbPopover]="disciplinaTip"
              triggers="mouseenter:mouseleave">
              <span class="dot"></span>
              <span class="paragraph">
                Disciplina partidária
              </span>
              <h5 *ngIf="parlamentar?.disciplina">{{ parlamentar?.disciplina * 100 | number: '1.0-0'}}%</h5>
              <h5 *ngIf="!parlamentar?.disciplina">--</h5>
              <ng-template #disciplinaTip>
                É a frequência com que os parlamentares seguem a orientação de seus partidos em votações nominais.
              </ng-template>
            </div>

            <div
              [ngbPopover]="governismoTip"
              triggers="mouseenter:mouseleave">
              <span class="dot dot-governismo"></span>
              <span class="paragraph">
                Governismo
              </span>
              <h5 *ngIf="parlamentar?.governismo">{{ parlamentar?.governismo * 100 | number: '1.0-0' }}%</h5>
              <h5 *ngIf="!parlamentar?.governismo">--</h5>   
              <ng-template #governismoTip>
                Calculado a partir do comportamento dos parlamentares, considerando que apoiar o governo quando
                a maioria foi contra, conta mais do que apoiá-lo junto com uma maioria. É usado o modelo IDEAL de Clinton, Jackman e Rivers.
              </ng-template>
            </div>
            
          </div>
        </div>
        
        <div class="vertical-divider"></div>
  
        <div class="flex3">
          <div class="container-atividades">
            <h5>Papéis importantes</h5>
            <div class="display-start">
              <div
                *ngFor="let papel of papeisImportantes"
                class="papeis-importantes">              
                  <span class="header header5" *ngIf="papel.value">{{papel.value}} </span>
                  <span class="header header5" *ngIf="!papel.value">0 </span>
                  <span class="paragraph">{{papel.item}}</span>
              </div>
            </div>              
              
            <div class="button-position">
              <button class="button"
                [routerLink]="['./papeis']"
                [routerLinkActive]="'active'"
                queryParamsHandling="merge"
                >
                Saiba mais</button>
            </div>
          </div>
        </div>
              
        <!-- *ngIf="totalDocs" -->
        <div class="acoes-agenda" 
          class="flex3"
          >
          <div class="container-atividades">
            <h5>{{totalDocs}} - Ações na agenda</h5>
            <div class="display-start">
              <span class="paragraph">
                Das <strong>{{ totalDocs }}</strong> ações,
                <span *ngFor="let autoria of autoriasPorTipo; let i = index" class="paragraph">
                  <strong>{{ autoria.values.length }}</strong>
                  {{formataTipo(autoria.key, autoria.values.length, (i + 1) === autoriasPorTipo.length)}}
                </span>
              </span>
            </div>
            <div class="button-position">
              <button class="button"
                [routerLink]="['./atividades']"
                [routerLinkActive]="'active'"
                queryParamsHandling="merge"  
              >
                Saiba mais
              </button>
            </div>
          </div>
        </div>
      </div>
  
    </div>
    <div class="veja-mais">
      <img (click)="setToggleDrawer()" [ngClass]="{'flipped': toggleDrawer === false}"
        src="../../assets/imgs/veja_mais_arrow.svg" alt="veja mais arrow" />
    </div>
  
  </div>
</div>

<div class="view-subnav">
  <ul class="nav justify-content-center parla-nav-tabs">
    <li class="nav-item">
      <div class="triangle-down" *ngIf="routeInclude('/votacoes')"></div>
      <a
        class="nav-link"
        [routerLink]="['./votacoes']"
        [routerLinkActive]="'active'"
        queryParamsHandling="merge">
        <!--
        <span class="icon-grafo"></span>
        -->
        Votações
      </a>
    </li>
    <li class="nav-item">
      <div class="triangle-down" *ngIf="routeInclude('/papeis')"></div>
      <a
        class="nav-link"
        [routerLink]="['./papeis']"
        [routerLinkActive]="'active'"
        queryParamsHandling="merge">
        <!--
        <span class="icon-papeis"></span>
        -->
        Trajetória
      </a>
    </li>
    <li class="nav-item">
      <div class="triangle-down" *ngIf="routeInclude('/atividades')"></div>
      <a
        class="nav-link"
        [routerLink]="['./atividades']"
        [routerLinkActive]="'active'"
        queryParamsHandling="merge">
        <!--
        <span class="icon-atividade"></span>
        -->
        Ações
      </a>
    </li>
    <li class="nav-item">
      <div class="triangle-down" *ngIf="routeInclude('/peso')"></div>
      <a
        class="nav-link"
        [routerLink]="['./peso']"
        [routerLinkActive]="'active'"
        queryParamsHandling="merge">
        <!--
        <span class="icon-peso"></span>
        -->
        Peso político
      </a>
    </li>
    <li class="nav-item">
      <div class="triangle-down" *ngIf="routeInclude('/redes-sociais')"></div>
      <a
        class="nav-link"
        [routerLink]="['./redes-sociais']"
        [routerLinkActive]="'active'"
        queryParamsHandling="merge">
        <!--
        <span class="icon-redes"></span>
        -->
        Redes sociais
      </a>
    </li>
  </ul>
</div>

<div class="container">
  <div class="card tabs-content-container">
    <router-outlet></router-outlet>
  </div>
</div>
