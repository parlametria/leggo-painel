<div class="app-container">
  <!-- <div class="proposicoes-navbar">
    <div class="container">
      <div class="row gutters-sm">
        <div class="col-6">
          <h4>{{ interesse?.nome_interesse }}</h4>
        </div>
        <div class="col-4">
          <app-filtro-texto-proposicoes
            [interesse]="interesse"
            (filterChange)="search($event)"
            [numeroProposicoes]="proposicoesDestaque?.length + proposicoes?.length"></app-filtro-texto-proposicoes>
        </div>
        <div class="col-2">
          <a
            [routerLink]="['../parlamentares']"
            routerLinkActive="router-link-active"
            class="btn btn-dark btn-block">
            <span class="icon-atores"></span>
            Parlamentares
          </a>
        </div>
      </div>
    </div>
  </div> -->
  <div [hidden]="isLoading | async">
    <div class="breadcrumbs"></div>
    <section class="proposicoes-em-destaque">
      <h2>Proposições em Alerta</h2>
      <div class="destaques-titles container">
        <div class="row">
          <div class="col-4">
            <h5 class="iniciadora-title">Iniciadora</h5>
          </div>
          <div class="col-4">
            <h5 class="revisora-title">Revisora</h5>
          </div>
          <div class="col-4">
            <h5 class="sancao-title">Sanção/Veto</h5>
          </div>
        </div>
      </div>
      <div class="destaques-block container">
        <div class="row">
          <div class="iniciadora col-4">
            <div class="circle">
              <div class="circle-inner">
                <a
                  [routerLink]="[proposicao.id_leggo]"
                  [ngbPopover]="destaqueInfo"
                  triggers="mouseenter:mouseleave"
                  *ngFor="let proposicao of proposicoesIniciadora"
                  class="proposicao-ball {{
                    proposicao?.etapas[proposicao?.etapas.length - 1]?.casa
                  }}"
                >
                  <ng-template #destaqueInfo>
                    {{
                      proposicao?.etapas[proposicao?.etapas.length - 1]?.sigla
                    }}
                  </ng-template>
                </a>
              </div>
            </div>
          </div>
          <div class="revisora col-4">
            <div class="circle">
              <a
                [routerLink]="[proposicao.id_leggo]"
                [ngbPopover]="destaqueInfo"
                triggers="mouseenter:mouseleave"
                *ngFor="let proposicao of proposicoesRevisora"
                class="proposicao-ball {{
                  proposicao?.etapas[proposicao?.etapas.length - 1]?.casa
                }}"
              >
                <ng-template #destaqueInfo>
                  {{ proposicao?.etapas[proposicao?.etapas.length - 1]?.sigla }}
                </ng-template></a
              >
            </div>
          </div>
          <div class="sancao col-4">
            <div class="circle">
              <a
                [routerLink]="[proposicao.id_leggo]"
                [ngbPopover]="destaqueInfo"
                triggers="mouseenter:mouseleave"
                *ngFor="let proposicao of proposicoesSancao"
                class="proposicao-ball {{
                  proposicao?.etapas[proposicao?.etapas.length - 1]?.casa
                }}"
              >
                <ng-template #destaqueInfo>
                  {{ proposicao?.etapas[proposicao?.etapas.length - 1]?.sigla }}
                </ng-template></a
              >
            </div>
          </div>
        </div>
        <div class="destaques-arrows">
          <div class="first-arrow">
            <img src="assets/imgs/seta_tramitacao_destaques.svg" alt="">
            <span>Estágio de tramitação</span>
          </div>
          <div class="second-arrow">
            <img src="assets/imgs/seta_tramitacao_destaques.svg" alt="">
            <span>Estágio de tramitação</span>
          </div>
        </div>
        <div class="destaques-count container">
          <div class="row">
            <div class="col-4">
              <h5 class="iniciadora-count">{{ proposicoesIniciadora.length + ' proposições nesta etapa' }}</h5>
            </div>
            <div class="col-4">
              <h5 class="revisora-count">{{ proposicoesRevisora.length + ' proposições nesta etapa' }}</h5>
            </div>
            <div class="col-4">
              <h5 class="sancao-count">{{ proposicoesSancao.length + ' proposições nesta etapa' }}</h5>
            </div>
          </div>
        </div>
        <div class="subtitles-block container">
          <div class="subtitle">
            <div class="proposicao-ball senado"></div>
            <span>Senado</span>
          </div>
          <div class="subtitle">
            <div class="proposicao-ball camara"></div>
            <span>Câmara</span>
          </div>
        </div>
      </div>
    </section>
  </div>
  <!-- <div class="container">
    <div class="my-4">
      <img
        src="https://via.placeholder.com/1640x550?text=destaques"
        width="100%">
    </div>
  </div> -->
  <div class="container pt-4">
    <div [hidden]="isLoading | async">
      <!-- <div *ngIf="proposicoes?.length > 1">
        <strong>{{ proposicoes?.length }}</strong>
        proposições
      </div>
      <div *ngIf="proposicoes?.length === 1">
        <strong>{{ proposicoes?.length }}</strong>
        proposição
      </div> -->
      <div *ngIf="proposicoes?.length === 0">Nenhuma proposição encontrada</div>

      <div class="row">
        <div class="col-9">
          <pagination-template
            #pag="paginationApi"
            maxSize="5"
            (pageChange)="pageChange($event)"
            [hidden]="pag.isFirstPage()"
          >
            <nav aria-label="Paginação" class="pb-1">
              <ul class="pagination justify-content-center">
                <li class="page-item">
                  <button
                    type="button"
                    class="page-link"
                    [disabled]="pag.isFirstPage()"
                    (click)="pag.previous()"
                  >
                    &lt;
                  </button>
                </li>
                <li
                  class="page-item"
                  *ngFor="let page of pag.pages"
                  [class.active]="pag.getCurrent() === page.value"
                >
                  <button
                    type="button"
                    class="page-link"
                    (click)="pag.setCurrent(page.value)"
                  >
                    {{ page.label }}
                  </button>
                </li>
                <li class="page-item">
                  <button
                    type="button"
                    class="page-link"
                    [disabled]="pag.isLastPage()"
                    (click)="pag.next()"
                  >
                    &gt;
                  </button>
                </li>
              </ul>
            </nav>
          </pagination-template>
          <div
            *ngFor="
              let proposicao of proposicoes
                | paginate
                  : { itemsPerPage: PROPOSICOES_POR_PAGINA, currentPage: p };
              index as i
            "
            class="mt-3"
          >
            <app-card-proposicao
              [proposicao]="proposicao"
              [id]="getProposicaoPosition(i, PROPOSICOES_POR_PAGINA, p)"
            ></app-card-proposicao>
          </div>
          <pagination-template
            #pag="paginationApi"
            maxSize="5"
            (pageChange)="pageChange($event)"
          >
            <nav aria-label="Paginação" class="pb-1">
              <ul class="pagination justify-content-center">
                <li class="page-item">
                  <button
                    type="button"
                    class="page-link"
                    [disabled]="pag.isFirstPage()"
                    (click)="pag.previous()"
                  >
                    &lt;
                  </button>
                </li>
                <li
                  class="page-item"
                  *ngFor="let page of pag.pages"
                  [class.active]="pag.getCurrent() === page.value"
                >
                  <button
                    type="button"
                    class="page-link"
                    (click)="pag.setCurrent(page.value)"
                  >
                    {{ page.label }}
                  </button>
                </li>
                <li class="page-item">
                  <button
                    type="button"
                    class="page-link"
                    [disabled]="pag.isLastPage()"
                    (click)="pag.next()"
                  >
                    &gt;
                  </button>
                </li>
              </ul>
            </nav>
          </pagination-template>
        </div>
        <div class="col-3">
          <app-filtro-proposicoes
            [interesse]="interesse"
            (filterChange)="search($event)"
            [numeroProposicoes]="
              proposicoesDestaque?.length + proposicoes?.length
            "
          ></app-filtro-proposicoes>
        </div>
      </div>
    </div>
  </div>
</div>
